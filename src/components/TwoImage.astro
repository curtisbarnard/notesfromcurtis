---
// This component places two images side by side on large screens and stacks them on small screens. Images should have the same aspect ratio. It generates responsive sizes at build time using Astro's built-in optimization.
// Import images from src/assets/images/ and pass them as props.
// Astro will automatically generate responsive sizes and formats.

import type { ImageMetadata } from 'astro';
import { Picture } from 'astro:assets';

interface Props {
  img1: ImageMetadata;
  altText1: string;
  caption1?: string;
  img2: ImageMetadata;
  altText2: string;
  caption2?: string;
}

const { img1, altText1, caption1, img2, altText2, caption2 } = Astro.props;
---

<div>
  <figure>
    <Picture
      src={img1}
      alt={altText1}
      widths={[492, 645, 984, 1290]}
      formats={['webp', 'avif']}
      sizes="(max-width: 600px) calc(100vw - 2rem), (max-width: 1000px) 645px, 492px"
      loading="lazy"
    />
    { caption1 && <figcaption>{caption1}</figcaption> }
  </figure>
  <figure>
    <Picture
      src={img2}
      alt={altText2}
      widths={[492, 645, 984, 1290]}
      formats={['webp', 'avif']}
      sizes="(max-width: 600px) calc(100vw - 2rem), (max-width: 1000px) 645px, 492px"
      loading="lazy"
    />
    { caption2 && <figcaption>{caption2}</figcaption> }
  </figure>
</div>

<style>
  div {
    margin-top: 1rem;
  }
  figure {
    margin: 0;
  }

  picture {
    display: block;
    width: 100%;
  }

  img {
    width: 100%;
    max-width: 100%;
    height: auto;
    display: block;
    box-shadow:
      0 3px 12px hsla(0, 0%, 0%, 0.05),
      0 3px 6px hsla(0, 0%, 0%, 0.05);
  }

  figcaption {
    width: 100%;
    max-width: 100%;
    font-size: 0.8rem;
    color: hsl(31, 30%, 20%);
    border-left: 3px solid hsl(31, 30%, 20%);
    padding-left: 0.5rem;
    margin-top: 0.5rem;
  }

  @media (min-width: 1000px) {
    div {
      display: grid;
      grid-template-columns: 492px 492px;
      width: 1000px;
      margin-left: 50%;
      transform: translateX(-50%);
      justify-content: space-between;
    }
  }

  @media (max-width: 1000px) {
    figcaption {
      margin-bottom: 1rem;
    }
  }
</style>
